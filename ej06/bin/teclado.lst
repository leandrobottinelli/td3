     1                                  GLOBAL POLLING
     2                                  
     3                                  EXTERN FIN_POLLING
     4                                  EXTERN CARGAR_TABLA
     5                                  EXTERN __INICIO_RAM_TECLADO_RUTINA
     6                                  
     7                                  %define _PUERTO_TECLADO  0x64;
     8                                  %define _PUERTO_TECLADO_CODIGO 0x60;
     9                                  
    10                                  section .rutina_teclado
    11                                  USE32
    12                                  
    13                                  POLLING:
    14                                  
    15 00000000 E464                    in al, _PUERTO_TECLADO 
    16 00000002 0FBAE000                bt eax, 0x00
    17 00000006 73F8                    jnc POLLING
    18                                  
    19                                  
    20 00000008 E460                    in al, _PUERTO_TECLADO_CODIGO
    21 0000000A 660FBAE007              bt ax, 0x7
    22                                  
    23 0000000F 6687DB                  xchg bx,bx
    24 00000012 3C1F                    cmp al, 0x1F		;Si detecto que la tecla fue "s" termino el programa
    25 00000014 0F84(00000000)          jz FIN_POLLING
    26                                  
    27                                  
    28 0000001A EB00                    jmp CARGADO_TABLA
    29                                  
    30                                  
    31                                  
    32                                  CARGADO_TABLA:
    33                                  
    34 0000001C 6650                    push ax
    35 0000001E E8(00000000)            call CARGAR_TABLA
    36 00000023 6658                    pop ax
    37 00000025 C3                      ret
